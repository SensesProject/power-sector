{"remainingRequest":"/Users/francescamorini/projects/power-sector/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/francescamorini/projects/power-sector/node_modules/library/src/components/SensesDownload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/francescamorini/projects/power-sector/node_modules/library/src/components/SensesDownload.vue","mtime":499162500000},{"path":"/Users/francescamorini/projects/power-sector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/francescamorini/projects/power-sector/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/francescamorini/projects/power-sector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/francescamorini/projects/power-sector/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBnZXQsIG1hcCwgaW5jbHVkZXMsIGhlYWQsIGZpbmQsIGlzTnVtYmVyIH0gZnJvbSAnbG9kYXNoJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCBWTW9kYWwgZnJvbSAndnVlLWpzLW1vZGFsJwppbXBvcnQgU2Vuc2VzQ29weSBmcm9tICcuL1NlbnNlc0NvcHkudnVlJwoKVnVlLnVzZShWTW9kYWwpCgovLyBGdW5jdGlvbiB0byBtYWtlIHNlbnRlbmNlIGZyb20gYXV0aG9yIGFycmF5CmNvbnN0IGNoYWluID0gKGEpID0+IHsgcmV0dXJuIFthLnNsaWNlKDAsIC0xKS5qb2luKCcsICcpLCBhLnNsaWNlKC0xKVswXV0uam9pbihhLmxlbmd0aCA8IDIgPyAnJyA6ICcgYW5kICcpIH0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2Vuc2VzRG93bmxvYWQnLAogIGNvbXBvbmVudHM6IHsKICAgIFNlbnNlc0NvcHkKICB9LAogIHByb3BzOiB7CiAgICB2aXNpYmxlOiB7CiAgICAgIHR5cGU6IFtCb29sZWFuLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgZG9jczogJ0lzIHRoZSBtb2RhbCB2aXNpYmxlIG9yIG5vci4gT3Igc3BlY2lmeSBzcGVjaWZpYyBzZWxlY3RlZCBpZCcKICAgIH0sCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdVbnRpdGxlZCBtb2R1bGUnLAogICAgICBkb2NzOiAnVGl0bGUgb2YgdGhlIG1vZHVsZScKICAgIH0sCiAgICBjbG9zZTogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogKCkgPT4ge30sCiAgICAgIGRvY3M6ICdGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBvbmNlIHRoZSB3aW5kb3cgY2xvc2VzJwogICAgfSwKICAgIGlkczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXQogICAgICB9LAogICAgICBkb2NzOiAnTGlzdCBvZiBpZHMgb2YgZG93bmxvYWRzIGZvciB0aGlzIG1vZHVsZScKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZG93bmxvYWRzOiBbXSwgLy8gQSBsaXN0IG9mIGRvd25sb2FkcyBmZXRjaGVkIGZyb20gZXh0ZXJuYWwgSlNPTiBmaWxlCiAgICAgIGFjdGl2ZUlEOiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGF2YWlsYWJsZUlEUyAoKSB7CiAgICAgIC8vIEdldCBhIGxpc3Qgb2YgYXZhaWxhYmxlIGRvd25sb2FkIGlkcwogICAgICByZXR1cm4gbWFwKHRoaXMuZG93bmxvYWRzLCAnaWQnKQogICAgfSwKICAgIGl0ZW0gKCkgewogICAgICAvLyBGaW5kIHRoZSBkb3dubG9hZCBpdGVtIGluIHRoZSBsaXN0IG9mIGRvd25sb2FkcyBmcm9tIHRoZSBpZAogICAgICByZXR1cm4gZmluZCh0aGlzLmRvd25sb2FkcywgeyBpZDogdGhpcy5hY3RpdmVJRCB9KQogICAgfSwKICAgIGF1dGhvciAoKSB7CiAgICAgIC8vIEV4dHJhY3QgdGhlIGF1dGhvcnMgZm9yIHRoaXMgZG93bmxvYWQKICAgICAgcmV0dXJuIGNoYWluKGdldCh0aGlzLml0ZW0sICdhdXRob3JzJywgW10pKQogICAgfSwKICAgIHJlZmVyZW5jZSAoKSB7CiAgICAgIC8vIEV4dHJhY3QgdGhlIHJlZmVyZW5jZSBmb3IgdGhpcyBkb3dubG9hZAogICAgICByZXR1cm4gZ2V0KHRoaXMuaXRlbSwgJ3JlZmVyZW5jZScpCiAgICB9LAogICAgZG93bmxvYWRFbGVtZW50cyAoKSB7CiAgICAgIC8vIENyZWF0ZSBhIGxpc3Qgb2YgZG93bmxvYWQgaXRlbXMgZm9yIHRoaXMgbW9kdWxlCiAgICAgIGNvbnN0IHsgaWRzLCBhY3RpdmVJRCwgZG93bmxvYWRzIH0gPSB0aGlzCiAgICAgIGlmIChpZHMgJiYgaWRzLmxlbmd0aCkgewogICAgICAgIHJldHVybiBtYXAoaWRzLCAoaWQpID0+IHsKICAgICAgICAgIGNvbnN0IGl0ZW0gPSBmaW5kKGRvd25sb2FkcywgeyBpZCB9KQogICAgICAgICAgY29uc3QgbGFiZWwgPSBnZXQoaXRlbSwgJ2xhYmVsJywgJ3VubmFtZWQgaXRlbScpCiAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGlkID09PSBhY3RpdmVJRAogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaWQsCiAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgIGxhYmVsLAogICAgICAgICAgICBpc0FjdGl2ZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgICAgcmV0dXJuIFtdCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmlzaWJsZSAodikgewogICAgICBpZiAodikgewogICAgICAgIHRoaXMuc2V0QWN0aXZlKGlzTnVtYmVyKHYpID8gdiA6IDApIC8vIENhbGwgd2l0aCBpZCBvZiBkb3dubG9hZCBvciAwIHRvIGRpc3BsYXkgdGhlIGZpcnN0CiAgICAgICAgdGhpcy4kbW9kYWwuc2hvdygnZG93bmxvYWQnKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2V0QWN0aXZlKGZhbHNlKQogICAgICAgIHRoaXMuJG1vZGFsLmhpZGUoJ2Rvd25sb2FkJykKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICAvLyBMb2FkIHRoZSBsaXN0IG9mIGRvd25sb2FkcwogICAgdGhpcy5sb2FkRG93bmxvYWRzKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlZCAoKSB7CiAgICAgIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSBjbG9zZSBidXR0b24gaXMgY2xpY2tlZCBvciB0aGUgb3V0ZXIgYXJlYQogICAgICB0aGlzLiRtb2RhbC5oaWRlKCdkb3dubG9hZCcpCiAgICAgIHRoaXMuYWN0aXZlSUQgPSBmYWxzZQogICAgICAvLyBFeGNldXRlIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gdGhlIGNvbXBvbmVudAogICAgICB0aGlzLmNsb3NlKCkKICAgIH0sCiAgICBzZXRBY3RpdmUgKHYpIHsKICAgICAgaWYgKHYgfHwgdiA9PT0gMCkgeyAvLyBTb21ldGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkCiAgICAgICAgaWYgKGluY2x1ZGVzKHRoaXMuYXZhaWxhYmxlSURTLCB2KSkgewogICAgICAgICAgLy8gVGhlIGlkIGlzIHByZXNlbnQgaW4gdGhlIGxpc3Qgb2YgZG93bmxvYWRzCiAgICAgICAgICB0aGlzLmFjdGl2ZUlEID0gdgogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pZHMubGVuZ3RoKSB7CiAgICAgICAgICAvLyBUaGUgbW9kdWxlIGhhcyBhIGxpc3Qgb2YgZG93bmxvYWRzCiAgICAgICAgICBjb25zdCBmaXJzdCA9IGhlYWQodGhpcy5pZHMpIC8vIEdldCB0aGUgZmlyc3QgaW4gdGhlIGxpc3QKICAgICAgICAgIGlmIChpbmNsdWRlcyh0aGlzLmF2YWlsYWJsZUlEUywgZmlyc3QpKSB7IC8vIENoZWNrIGFnYWluIGlmIGlkIHByZXNlbnQKICAgICAgICAgICAgdGhpcy5hY3RpdmVJRCA9IGZpcnN0IC8vIFNlbGVjdCB0aGUgZmlyc3Qgb25lCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFjdGl2ZUlEID0gZmFsc2UgLy8gU2V0IGFjdGl2ZSBlbGVtZW50IHRvIGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWN0aXZlSUQgPSBmYWxzZSAvLyBTZXQgYWN0aXZlIGVsZW1lbnQgdG8gZmFsc2UKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gU2V0IHRoZSBhY3RpdmUgZWxlbWVudCB0byBmYWxzZQogICAgICAgIHRoaXMuYWN0aXZlSUQgPSBmYWxzZQogICAgICB9CiAgICB9LAogICAgbG9hZERvd25sb2FkcyAoKSB7CiAgICAgIGF4aW9zLmdldCgnaHR0cHM6Ly9kZXYuY2xpbWF0ZXNjZW5hcmlvcy5vcmcvc2V0dGluZ3MvZG93bmxvYWRzLmpzb24nKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5kb3dubG9hZHMgPSByZXNwb25zZS5kYXRhLmRvd25sb2FkcwogICAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["SensesDownload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SensesDownload.vue","sourceRoot":"node_modules/library/src/components","sourcesContent":["<template>\n  <modal\n    :scrollable=\"true\"\n    :width=\"800\"\n    @closed=\"closed\"\n    name=\"download\"\n    height=\"auto\"\n  >\n    <div class=\"page-download\">\n      <header class=\"download-header\">\n        <h1 class=\"mono\">\n          {{ title }}\n        </h1>\n        <span v-if=\"downloadElements.length\" class=\"caption\">Available downloads</span>\n        <ul v-if=\"downloadElements.length\" class=\"list\">\n          <li\n            v-for=\"element in downloadElements\"\n            :key=\"element.id\"\n            :class=\"{ isActive: element.isActive, clickable: !element.isActive }\"\n            @click=\"() => setActive(element.id)\"\n          >\n            {{ element.label }}\n          </li>\n        </ul>\n        <span v-else>No downloads available for this module</span>\n      </header>\n      <div v-if=\"activeID && item\" class=\"download-content\">\n        <div class=\"download-download\">\n          <h2>{{ item.label }}</h2>\n          <div>\n            <a :href=\"item.link\" class=\"btn btn--action\">Download</a>\n          </div>\n          <p class=\"description\">\n            {{ item.description }}\n          </p>\n        </div>\n        <dl class=\"download-details\">\n          <dt class=\"caption\">\n            Preview\n          </dt>\n          <dd class=\"gallery\">\n            <ul class=\"previews\">\n              <li\n                v-for=\"(element, i) in item.previews\"\n                :key=\"i\"\n                class=\"preview\">\n                <img :src=\"`https://dev.climatescenarios.org/share/${element}`\">\n              </li>\n            </ul>\n          </dd>\n          <dt class=\"caption\">\n            Authors\n          </dt>\n          <dd>{{ author }}</dd>\n          <dt v-if=\"reference\" class=\"caption\">\n            Reference\n          </dt>\n          <dd v-if=\"reference\">\n            <SensesCopy :content=\"item.reference\" />\n          </dd>\n          <dt v-if=\"reference\" class=\"caption\">\n            URL\n          </dt>\n          <dd v-if=\"reference\">\n            <SensesCopy content=\"https://climatescenarios.org/#primerdownloads\" />\n          </dd>\n          <dt class=\"caption\">\n            Licence\n          </dt>\n          <dd>{{ item.licence }}</dd>\n        </dl>\n        <footer class=\"download-footer\">\n          <strong>You are free to</strong>\n          <ul>\n            <li>Copy and redistribute the material in any medium or format</li>\n            <li>Remix, transform, and build upon the material for any purpose, even commercially</li>\n          </ul>\n          <strong>Under the following terms</strong>\n          <ul>\n            <li>You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</li>\n            <li>If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</li>\n            <li>You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.</li>\n          </ul>\n        </footer>\n        <span @click=\"closed\" class=\"close\">&times;</span>\n      </div>\n      <div v-else class=\"download-error\">\n        <h2>Download can not be found</h2>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport { get, map, includes, head, find, isNumber } from 'lodash'\nimport axios from 'axios'\nimport VModal from 'vue-js-modal'\nimport SensesCopy from './SensesCopy.vue'\n\nVue.use(VModal)\n\n// Function to make sentence from author array\nconst chain = (a) => { return [a.slice(0, -1).join(', '), a.slice(-1)[0]].join(a.length < 2 ? '' : ' and ') }\n\nexport default {\n  name: 'SensesDownload',\n  components: {\n    SensesCopy\n  },\n  props: {\n    visible: {\n      type: [Boolean, Number],\n      default: false,\n      docs: 'Is the modal visible or nor. Or specify specific selected id'\n    },\n    title: {\n      type: String,\n      default: 'Untitled module',\n      docs: 'Title of the module'\n    },\n    close: {\n      type: Function,\n      default: () => {},\n      docs: 'Function that is called once the window closes'\n    },\n    ids: {\n      type: Array,\n      default: () => {\n        return []\n      },\n      docs: 'List of ids of downloads for this module'\n    }\n  },\n  data () {\n    return {\n      downloads: [], // A list of downloads fetched from external JSON file\n      activeID: false\n    }\n  },\n  computed: {\n    availableIDS () {\n      // Get a list of available download ids\n      return map(this.downloads, 'id')\n    },\n    item () {\n      // Find the download item in the list of downloads from the id\n      return find(this.downloads, { id: this.activeID })\n    },\n    author () {\n      // Extract the authors for this download\n      return chain(get(this.item, 'authors', []))\n    },\n    reference () {\n      // Extract the reference for this download\n      return get(this.item, 'reference')\n    },\n    downloadElements () {\n      // Create a list of download items for this module\n      const { ids, activeID, downloads } = this\n      if (ids && ids.length) {\n        return map(ids, (id) => {\n          const item = find(downloads, { id })\n          const label = get(item, 'label', 'unnamed item')\n          const isActive = id === activeID\n          return {\n            id,\n            ...item,\n            label,\n            isActive\n          }\n        })\n      }\n      return []\n    }\n  },\n  watch: {\n    visible (v) {\n      if (v) {\n        this.setActive(isNumber(v) ? v : 0) // Call with id of download or 0 to display the first\n        this.$modal.show('download')\n      } else {\n        this.setActive(false)\n        this.$modal.hide('download')\n      }\n    }\n  },\n  mounted () {\n    // Load the list of downloads\n    this.loadDownloads()\n  },\n  methods: {\n    closed () {\n      // Triggered when the close button is clicked or the outer area\n      this.$modal.hide('download')\n      this.activeID = false\n      // Exceute the function passed to the component\n      this.close()\n    },\n    setActive (v) {\n      if (v || v === 0) { // Something should be selected\n        if (includes(this.availableIDS, v)) {\n          // The id is present in the list of downloads\n          this.activeID = v\n        } else if (this.ids.length) {\n          // The module has a list of downloads\n          const first = head(this.ids) // Get the first in the list\n          if (includes(this.availableIDS, first)) { // Check again if id present\n            this.activeID = first // Select the first one\n          } else {\n            this.activeID = false // Set active element to false\n          }\n        } else {\n          this.activeID = false // Set active element to false\n        }\n      } else {\n        // Set the active element to false\n        this.activeID = false\n      }\n    },\n    loadDownloads () {\n      axios.get('https://dev.climatescenarios.org/settings/downloads.json')\n        .then((response) => {\n          this.downloads = response.data.downloads\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../style/global.scss\";\n\n.page-download {\n  // margin: $spacing;\n  display: grid;\n  grid-row-gap: $spacing;\n  position: relative;\n  z-index: 10;\n\n  .download-download, .download-details {\n    margin: $spacing;\n    margin-bottom: 0;\n    margin-top: 0;\n  }\n\n  .download-download {\n    display: grid;\n    align-items: center;\n    grid-template-columns: 2fr 1fr;\n    grid-column-gap: $spacing;\n    grid-row-gap: $spacing;\n\n    .description {\n      grid-column-end: span 2;\n    }\n  }\n\n  .download-header {\n    // background-color: $color-neon;\n    padding: $spacing;\n    // color: #fff;\n    border-bottom: 1px solid getColor(gray, 80);\n\n    h1 {\n      font-size: 2.3rem;\n      font-style: italic;\n      line-height: 1;\n      letter-spacing: -0.02em;\n      margin-bottom: $spacing / 2;\n    }\n\n    .caption {\n      color: rgba(#000, 0.7);\n    }\n\n    .list {\n      margin-top: $spacing / 4;\n      list-style: none;\n\n      li {\n        padding: 0.2em 1em 0.2em 1.6em;\n        list-style-position: inside;\n        text-indent: -1.6em;\n        line-height: 1.5em;\n        color: $color-neon;\n\n        &:hover, &:hover {\n          color: getColor(neon, 40);\n        }\n\n        &.isActive {\n          color: #000;\n        }\n\n        &:before {\n          content: \"— \";\n          color: getColor(gray, 80);\n          margin-right: 0.3em;\n        }\n      }\n    }\n  }\n\n  .download-footer {\n    border-top: 1px solid getColor(gray, 80);\n    padding: $spacing;\n\n    ul {\n      font-size: 0.8rem;\n    }\n\n    strong {\n      font-size: 0.9rem;\n    }\n\n    ul {\n      margin-left: $spacing;\n      margin-bottom: $spacing / 2;\n    }\n\n    .btn {\n      margin-top: $spacing;\n    }\n\n    dl {\n      margin-bottom: $spacing / 2;\n    }\n  }\n\n  .close {\n    position: absolute;\n    top: 0;\n    right: 0;\n    font-size: 1.5rem;\n    display: inline-block;\n    color: $color-neon;\n    cursor: pointer;\n    speak: none;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1em;\n    margin-top: $spacing / 3;\n    margin-right: $spacing / 2;\n\n    &:hover {\n      color: #000;\n    }\n  }\n\n  .download-error {\n    @include center();\n    margin-bottom: $spacing;\n  }\n\n  .download-details {\n    dd {\n      margin-bottom: $spacing / 2;\n\n      &:last-of-type {\n        margin-bottom: 0;\n      }\n    }\n  }\n\n  .gallery {\n    position: relative;\n    height: 200px;\n  }\n\n  .previews {\n    width: 100%;\n    overflow-y: scroll;\n    display: flex;\n    flex-direction: row;\n    list-style: none;\n    position: absolute;\n\n    .preview {\n      height: 200px;\n      padding: $spacing / 4;\n\n      img {\n        height: 100%;\n        width: auto;\n        box-shadow: $box-shadow--default;\n      }\n    }\n  }\n}\n\n</style>\n"]}]}